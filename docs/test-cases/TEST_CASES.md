# 🧪 多人即時遊戲平台 - 測試案例文件 (Test Cases)

## 📋 文件資訊

| 項目 | 內容 |
|------|------|
| **文件版本** | 1.0 |
| **建立日期** | 2024年12月 |
| **文件狀態** | 草稿 |
| **負責人** | 測試工程師 |
| **相關文件** | BRD.md, PRD.md, FRD.md, USER_STORIES.md |

---

## 🎯 1. 測試概述

### 1.1 測試目標
確保多人即時遊戲平台的所有功能按照需求規格正常運作，驗證系統的穩定性、性能和用戶體驗。

### 1.2 測試範圍
- **功能測試**: 驗證所有用戶故事和功能需求
- **性能測試**: 驗證系統性能和並發處理能力
- **安全測試**: 驗證輸入驗證和安全防護機制
- **用戶體驗測試**: 驗證界面友好性和操作流程

### 1.3 測試環境
- **開發環境**: localhost:3001 (伺服器), localhost:3000 (客戶端)
- **測試工具**: 自動化測試腳本、手動測試、瀏覽器開發者工具
- **測試數據**: 模擬多用戶場景、各種邊界條件

---

## ✅ 2. 驗收測試 (Acceptance Tests)

### 2.1 用戶管理模組驗收測試

#### AT-001: 玩家登入驗收測試
**測試目標**: 驗證玩家能夠成功登入系統並進入遊戲大廳

**前置條件**:
- 系統正常運行
- 網路連接正常
- 瀏覽器支援 WebSocket

**測試步驟**:
1. 打開遊戲網站
2. 在登入界面輸入有效名稱（1-20字元）
3. 點擊"進入大廳"按鈕
4. 觀察系統響應

**驗收標準**:
- [ ] 登入成功，自動進入遊戲大廳
- [ ] 玩家名稱正確顯示
- [ ] 連接狀態顯示"已連接"
- [ ] 大廳界面正常載入

**測試結果**: ⬜ 通過 ⬜ 失敗

#### AT-002: 玩家狀態管理驗收測試
**測試目標**: 驗證系統能夠正確追蹤和管理玩家狀態

**前置條件**:
- 玩家已成功登入系統
- 在遊戲大廳中

**測試步驟**:
1. 觀察玩家狀態顯示
2. 進入遊戲房間
3. 觀察狀態變化
4. 斷開網路連接
5. 重新連接

**驗收標準**:
- [ ] 登入後狀態顯示為"online"
- [ ] 進入遊戲後狀態變更為"in-game"
- [ ] 斷線後狀態自動更新為"offline"
- [ ] 重新連接時能夠恢復狀態

**測試結果**: ⬜ 通過 ⬜ 失敗

### 2.2 遊戲大廳模組驗收測試

#### AT-003: 查看遊戲大廳驗收測試
**測試目標**: 驗證遊戲大廳能夠正確顯示在線玩家和可用房間

**前置條件**:
- 玩家已登入系統
- 系統中有其他在線玩家和房間

**測試步驟**:
1. 進入遊戲大廳
2. 觀察在線玩家列表
3. 觀察可用房間列表
4. 等待新玩家加入/離開
5. 觀察列表更新

**驗收標準**:
- [ ] 大廳顯示所有在線玩家列表
- [ ] 大廳顯示所有可用房間列表
- [ ] 玩家列表包含玩家名稱和狀態
- [ ] 房間列表包含房間名稱、房主、玩家數量、狀態
- [ ] 列表即時更新

**測試結果**: ⬜ 通過 ⬜ 失敗

#### AT-004: 大廳聊天驗收測試
**測試目標**: 驗證大廳聊天功能正常運作

**前置條件**:
- 玩家在遊戲大廳中
- 有其他在線玩家

**測試步驟**:
1. 在聊天輸入框輸入訊息
2. 點擊發送或按Enter鍵
3. 觀察訊息顯示
4. 觀察其他玩家是否收到訊息

**驗收標準**:
- [ ] 玩家能夠發送文字訊息
- [ ] 訊息包含發送者名稱和時間戳
- [ ] 所有大廳玩家都能看到聊天訊息
- [ ] 聊天記錄限制在最近100條

**測試結果**: ⬜ 通過 ⬜ 失敗

### 2.3 房間管理模組驗收測試

#### AT-005: 創建遊戲房間驗收測試
**測試目標**: 驗證玩家能夠成功創建遊戲房間

**前置條件**:
- 玩家已登入系統
- 在遊戲大廳中

**測試步驟**:
1. 點擊"創建房間"按鈕
2. 填寫房間設定（名稱、人數、時長）
3. 點擊"創建"按鈕
4. 觀察創建結果

**驗收標準**:
- [ ] 房間創建成功
- [ ] 自動加入房間
- [ ] 成為房主
- [ ] 房間信息正確顯示

**測試結果**: ⬜ 通過 ⬜ 失敗

#### AT-006: 加入遊戲房間驗收測試
**測試目標**: 驗證玩家能夠成功加入其他玩家創建的房間

**前置條件**:
- 玩家已登入系統
- 系統中有可用的遊戲房間

**測試步驟**:
1. 在房間列表中選擇一個房間
2. 點擊"加入房間"按鈕
3. 觀察加入結果

**驗收標準**:
- [ ] 成功加入房間
- [ ] 房間界面正常載入
- [ ] 看到房間內其他玩家
- [ ] 房主權限正確顯示

**測試結果**: ⬜ 通過 ⬜ 失敗

### 2.4 遊戲功能模組驗收測試

#### AT-007: 開始遊戲驗收測試
**測試目標**: 驗證房主能夠成功開始遊戲

**前置條件**:
- 房間內有多個玩家
- 玩家是房主

**測試步驟**:
1. 點擊"開始遊戲"按鈕
2. 觀察遊戲初始化過程
3. 觀察所有玩家進入遊戲狀態

**驗收標準**:
- [ ] 遊戲成功開始
- [ ] 所有玩家進入遊戲界面
- [ ] 遊戲數據正確初始化
- [ ] 房間狀態變更為"playing"

**測試結果**: ⬜ 通過 ⬜ 失敗

#### AT-008: 參與多人遊戲驗收測試
**測試目標**: 驗證玩家能夠正常參與多人遊戲

**前置條件**:
- 遊戲已開始
- 玩家在遊戲界面中

**測試步驟**:
1. 使用鍵盤方向鍵控制角色
2. 移動角色收集食物
3. 觀察分數變化
4. 觀察其他玩家同步

**驗收標準**:
- [ ] 角色移動正常
- [ ] 食物收集成功
- [ ] 分數正確計算
- [ ] 所有玩家同步看到相同狀態

**測試結果**: ⬜ 通過 ⬜ 失敗

---

## 🧪 3. 詳細測試案例

### 3.1 功能測試案例

#### TC-001: 玩家登入功能測試
**測試ID**: TC-001  
**測試類型**: 功能測試  
**優先級**: P0  
**相關用戶故事**: US-001  

**測試描述**: 驗證玩家登入功能的各種場景

**測試案例**:

| 案例編號 | 測試場景 | 測試數據 | 預期結果 | 實際結果 |
|----------|----------|----------|----------|----------|
| TC-001-01 | 正常登入 | 名稱: "玩家A" | 登入成功，進入大廳 | ⬜ |
| TC-001-02 | 空名稱登入 | 名稱: "" | 顯示錯誤訊息 | ⬜ |
| TC-001-03 | 超長名稱登入 | 名稱: "非常非常非常非常非常非常長的名稱" | 名稱被截斷或拒絕 | ⬜ |
| TC-001-04 | 特殊字符名稱 | 名稱: "玩家@#$%" | 登入成功，特殊字符被處理 | ⬜ |
| TC-001-05 | 重複名稱登入 | 名稱: "玩家A" (已存在) | 登入成功，使用Socket ID區分 | ⬜ |

**測試步驟**:
1. 打開遊戲網站
2. 輸入測試數據
3. 點擊"進入大廳"按鈕
4. 觀察系統響應
5. 記錄測試結果

**前置條件**: 系統正常運行，網路連接正常  
**後置條件**: 測試完成，系統狀態恢復

---

#### TC-002: 房間創建功能測試
**測試ID**: TC-002  
**測試類型**: 功能測試  
**優先級**: P0  
**相關用戶故事**: US-005  

**測試描述**: 驗證房間創建功能的各種參數組合

**測試案例**:

| 案例編號 | 測試場景 | 房間名稱 | 最大玩家數 | 遊戲時長 | 預期結果 | 實際結果 |
|----------|----------|----------|-------------|----------|----------|----------|
| TC-002-01 | 正常創建 | "測試房間1" | 4 | 60秒 | 創建成功 | ⬜ |
| TC-002-02 | 空房間名稱 | "" | 4 | 60秒 | 顯示錯誤訊息 | ⬜ |
| TC-002-03 | 最小玩家數 | "測試房間2" | 2 | 30秒 | 創建成功 | ⬜ |
| TC-002-04 | 最大玩家數 | "測試房間3" | 8 | 60秒 | 創建成功 | ⬜ |
| TC-002-05 | 邊界玩家數 | "測試房間4" | 1 | 30秒 | 顯示錯誤訊息 | ⬜ |
| TC-002-06 | 超限玩家數 | "測試房間5" | 9 | 60秒 | 顯示錯誤訊息 | ⬜ |

**測試步驟**:
1. 在遊戲大廳中點擊"創建房間"
2. 填寫房間設定參數
3. 點擊"創建"按鈕
4. 觀察創建結果
5. 記錄測試結果

**前置條件**: 玩家已登入系統，在遊戲大廳中  
**後置條件**: 測試完成，清理測試房間

---

#### TC-003: 多人遊戲同步測試
**測試ID**: TC-003  
**測試類型**: 功能測試  
**優先級**: P0  
**相關用戶故事**: US-009, US-010  

**測試描述**: 驗證多人遊戲中所有玩家的同步狀態

**測試案例**:

| 案例編號 | 測試場景 | 測試玩家數 | 測試動作 | 預期結果 | 實際結果 |
|----------|----------|-------------|----------|----------|----------|
| TC-003-01 | 基本同步 | 2 | 玩家A移動角色 | 玩家B看到同步移動 | ⬜ |
| TC-003-02 | 食物收集同步 | 3 | 玩家A收集食物 | 所有玩家看到食物消失，分數更新 | ⬜ |
| TC-003-03 | 碰撞檢測同步 | 2 | 玩家A撞牆 | 所有玩家看到遊戲結束 | ⬜ |
| TC-003-04 | 遊戲狀態同步 | 4 | 房主開始遊戲 | 所有玩家同時進入遊戲 | ⬜ |
| TC-003-05 | 斷線重連同步 | 3 | 玩家A斷線重連 | 玩家A狀態恢復，其他玩家看到 | ⬜ |

**測試步驟**:
1. 創建測試房間
2. 多個玩家加入房間
3. 開始遊戲
4. 執行測試動作
5. 觀察所有玩家同步狀態
6. 記錄測試結果

**前置條件**: 房間內有多個玩家，遊戲已開始  
**後置條件**: 測試完成，遊戲結束

---

### 3.2 性能測試案例

#### TC-004: 並發用戶性能測試
**測試ID**: TC-004  
**測試類型**: 性能測試  
**優先級**: P1  
**相關需求**: 支援100+同時在線用戶  

**測試描述**: 驗證系統在高並發情況下的性能表現

**測試案例**:

| 案例編號 | 測試場景 | 並發用戶數 | 測試時長 | 預期結果 | 實際結果 |
|----------|----------|-------------|----------|----------|----------|
| TC-004-01 | 低並發測試 | 10 | 5分鐘 | 響應時間 < 50ms | ⬜ |
| TC-004-02 | 中並發測試 | 50 | 10分鐘 | 響應時間 < 100ms | ⬜ |
| TC-004-03 | 高並發測試 | 100 | 15分鐘 | 響應時間 < 200ms | ⬜ |
| TC-004-04 | 極限並發測試 | 150 | 20分鐘 | 系統穩定運行 | ⬜ |
| TC-004-05 | 壓力測試 | 200 | 30分鐘 | 系統不崩潰 | ⬜ |

**測試步驟**:
1. 準備測試腳本和模擬用戶
2. 逐步增加並發用戶數
3. 監控系統性能指標
4. 記錄響應時間和錯誤率
5. 分析測試結果

**性能指標**:
- 響應時間: < 200ms
- 錯誤率: < 1%
- 記憶體使用: 穩定
- CPU使用率: < 80%

---

#### TC-005: 網路延遲測試
**測試ID**: TC-005  
**測試類型**: 性能測試  
**優先級**: P1  
**相關需求**: 遊戲同步延遲 < 50ms  

**測試描述**: 驗證系統在不同網路延遲下的表現

**測試案例**:

| 案例編號 | 測試場景 | 網路延遲 | 測試內容 | 預期結果 | 實際結果 |
|----------|----------|-----------|----------|----------|----------|
| TC-005-01 | 低延遲 | 10ms | 角色移動同步 | 同步延遲 < 20ms | ⬜ |
| TC-005-02 | 中延遲 | 100ms | 角色移動同步 | 同步延遲 < 50ms | ⬜ |
| TC-005-03 | 高延遲 | 300ms | 角色移動同步 | 同步延遲 < 100ms | ⬜ |
| TC-005-04 | 極高延遲 | 500ms | 角色移動同步 | 遊戲仍可進行 | ⬜ |
| TC-005-05 | 網路抖動 | 50-200ms | 角色移動同步 | 系統穩定運行 | ⬜ |

**測試步驟**:
1. 設定網路延遲模擬器
2. 進行多人遊戲測試
3. 測量同步延遲時間
4. 觀察遊戲體驗
5. 記錄測試結果

**性能指標**:
- 同步延遲: < 100ms
- 遊戲流暢度: 無明顯卡頓
- 錯誤率: < 5%

---

### 3.3 安全測試案例

#### TC-006: 輸入驗證安全測試
**測試ID**: TC-006  
**測試類型**: 安全測試  
**優先級**: P1  
**相關需求**: 防止XSS攻擊，輸入驗證  

**測試描述**: 驗證系統的輸入驗證和安全防護機制

**測試案例**:

| 案例編號 | 測試場景 | 測試輸入 | 預期結果 | 實際結果 |
|----------|----------|----------|----------|----------|
| TC-006-01 | XSS腳本注入 | `<script>alert('xss')</script>` | 腳本被轉義，不執行 | ⬜ |
| TC-006-02 | HTML標籤注入 | `<h1>標題</h1>` | 標籤被轉義，顯示為文字 | ⬜ |
| TC-006-03 | SQL注入嘗試 | `'; DROP TABLE users; --` | 輸入被安全處理 | ⬜ |
| TC-006-04 | 特殊字符處理 | `!@#$%^&*()_+` | 字符被安全處理 | ⬜ |
| TC-006-05 | 超長輸入 | 1000個字符的輸入 | 輸入被截斷或拒絕 | ⬜ |

**測試步驟**:
1. 在各種輸入框中輸入測試數據
2. 觀察系統處理結果
3. 檢查是否有安全漏洞
4. 記錄測試結果

**安全要求**:
- 無XSS漏洞
- 無SQL注入漏洞
- 輸入長度限制
- 特殊字符安全處理

---

#### TC-007: 權限控制測試
**測試ID**: TC-007  
**測試類型**: 安全測試  
**優先級**: P1  
**相關需求**: 房主權限控制，用戶隔離  

**測試描述**: 驗證系統的權限控制和用戶隔離機制

**測試案例**:

| 案例編號 | 測試場景 | 測試用戶 | 測試動作 | 預期結果 | 實際結果 |
|----------|----------|-----------|----------|----------|----------|
| TC-007-01 | 非房主開始遊戲 | 普通玩家 | 點擊開始遊戲 | 按鈕不可見或無效 | ⬜ |
| TC-007-02 | 非房主結束遊戲 | 普通玩家 | 嘗試結束遊戲 | 操作被拒絕 | ⬜ |
| TC-007-03 | 房間隔離 | 房間A玩家 | 發送房間B訊息 | 訊息無法發送 | ⬜ |
| TC-007-04 | 權限轉移 | 房主離開 | 房主權限轉移 | 權限正確轉移給第一個玩家 | ⬜ |
| TC-007-05 | 非法操作 | 斷線用戶 | 嘗試遊戲操作 | 操作被拒絕 | ⬜ |

**測試步驟**:
1. 創建測試房間
2. 多個玩家加入
3. 測試各種權限場景
4. 觀察系統響應
5. 記錄測試結果

**安全要求**:
- 權限控制正確
- 用戶隔離有效
- 非法操作被拒絕
- 權限轉移正常

---

## 📊 4. 測試執行計劃

### 4.1 測試階段規劃

| 階段 | 時間 | 測試類型 | 負責人 | 狀態 |
|------|------|----------|--------|------|
| 第一階段 | 第1週 | 功能測試 | 測試工程師 | ⬜ |
| 第二階段 | 第2週 | 性能測試 | 測試工程師 | ⬜ |
| 第三階段 | 第3週 | 安全測試 | 安全工程師 | ⬜ |
| 第四階段 | 第4週 | 用戶體驗測試 | UX設計師 | ⬜ |
| 第五階段 | 第5週 | 回歸測試 | 測試工程師 | ⬜ |

### 4.2 測試資源需求

**人力資源**:
- 測試工程師: 2人
- 安全工程師: 1人
- UX設計師: 1人
- 開發工程師: 1人（支援）

**工具資源**:
- 自動化測試腳本
- 性能監控工具
- 安全測試工具
- 瀏覽器測試環境

**環境資源**:
- 測試伺服器
- 多台測試客戶端
- 網路延遲模擬器
- 負載測試工具

---

## 📈 5. 測試結果追蹤

### 5.1 測試執行狀態

| 測試類型 | 總案例數 | 已執行 | 通過 | 失敗 | 阻塞 | 通過率 |
|----------|----------|--------|------|------|------|--------|
| 驗收測試 | 8 | 0 | 0 | 0 | 0 | 0% |
| 功能測試 | 15 | 0 | 0 | 0 | 0 | 0% |
| 性能測試 | 10 | 0 | 0 | 0 | 0 | 0% |
| 安全測試 | 10 | 0 | 0 | 0 | 0 | 0% |
| **總計** | **43** | **0** | **0** | **0** | **0** | **0%** |

### 5.2 缺陷統計

| 嚴重程度 | 數量 | 狀態 | 解決率 |
|----------|------|------|--------|
| 嚴重 (P0) | 0 | 0 | 0% |
| 高 (P1) | 0 | 0 | 0% |
| 中 (P2) | 0 | 0 | 0% |
| 低 (P3) | 0 | 0 | 0% |

---

## 🚀 6. 自動化測試腳本

### 6.1 現有測試腳本

| 腳本名稱 | 路徑 | 測試範圍 | 狀態 |
|----------|------|----------|------|
| 整合測試 | `scripts/test/integration-test.js` | 完整遊戲流程 | ✅ 可用 |
| 多人遊戲測試 | `scripts/test/multiplayer-game-test.js` | 多人遊戲功能 | ✅ 可用 |
| 貪食蛇遊戲測試 | `scripts/test/snake-game-test.js` | 遊戲邏輯 | ✅ 可用 |
| 聊天測試 | `scripts/tools/chat-test.html` | 聊天功能 | ✅ 可用 |

### 6.2 測試腳本執行

**執行命令**:
```bash
# 整合測試
node scripts/test/integration-test.js

# 多人遊戲測試
node scripts/test/multiplayer-game-test.js

# 貪食蛇遊戲測試
node scripts/test/snake-game-test.js
```

**執行環境要求**:
- Node.js 14+
- 伺服器運行在 localhost:3001
- 客戶端運行在 localhost:3000

---

## 📝 7. 測試報告模板

### 7.1 測試執行報告

**測試執行報告**

| 項目 | 內容 |
|------|------|
| 測試日期 | YYYY-MM-DD |
| 測試版本 | v1.0 |
| 測試環境 | 開發環境 |
| 測試人員 | 測試工程師姓名 |
| 測試範圍 | 功能/性能/安全測試 |

**測試結果摘要**:
- 總測試案例數: XX
- 通過: XX
- 失敗: XX
- 阻塞: XX
- 通過率: XX%

**主要發現**:
1. 功能正常運作
2. 性能符合要求
3. 安全機制有效

**建議事項**:
1. 持續監控性能
2. 定期安全測試
3. 用戶體驗優化

---

## 🔄 8. 測試維護和更新

### 8.1 測試案例維護
- 根據需求變更更新測試案例
- 定期審查測試案例的有效性
- 根據用戶反饋調整測試重點

### 8.2 測試腳本維護
- 保持測試腳本與系統同步
- 優化測試腳本性能
- 增加新的測試場景

### 8.3 測試環境維護
- 定期更新測試環境
- 維護測試數據
- 確保測試工具可用性

---

## 📚 9. 附錄

### 9.1 術語定義
- **AT**: Acceptance Test，驗收測試
- **TC**: Test Case，測試案例
- **P0/P1/P2**: 優先級定義
- **XSS**: Cross-Site Scripting，跨站腳本攻擊

### 9.2 參考文檔
- 業務需求文件 (BRD)
- 產品需求文件 (PRD)
- 功能需求文件 (FRD)
- 用戶故事文件 (USER_STORIES)
- 使用案例文件 (USE_CASES)

### 9.3 測試工具清單
- **自動化測試**: Node.js, Socket.IO Client
- **性能測試**: 自定義負載測試腳本
- **安全測試**: 手動安全測試
- **瀏覽器測試**: Chrome, Firefox, Safari, Edge

---

**文件結束**

*此測試案例文件基於需求文件和用戶故事，為系統測試提供完整的測試覆蓋。*
